<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Para Ti 游눝</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: black;
      font-family: "Courier New", monospace; /* estilo m치quina de escribir */
      color: #FFD700;
    }
    #mensaje {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 2em;
      color: #ffffff;
      text-align: center;
      opacity: 0;
      transition: opacity 2s ease;
      white-space: pre-line;
    }
  </style>
</head>
<body>
  <div id="mensaje"></div>
  <script>
    let particles = [];
    let flowerPoints = [];
    let heartPoints = [];
    let stage = 0;
    let typewriterText = [
      "Eres mi flor amarilla 游꺞游눝",
      "Aunque estemos lejos, siempre pienso en ti 仇벒잺",
      "Siempre te llevo en mi coraz칩n",
      "Te amo mucho mi tulip치n 游꺙仇벒잺"
    ];
    let currentText = "";
    let textIndex = 0;
    let charIndex = 0;

    function setup() {
      createCanvas(windowWidth, windowHeight);
      noStroke();

      // Generamos puntos de la flor
      for (let a = 0; a < TWO_PI; a += 0.02) {
        let r = 200 * cos(6 * a);
        let x = r * cos(a);
        let y = r * sin(a);
        flowerPoints.push(createVector(x, y));
      }

      // Generamos puntos del coraz칩n (curva param칠trica)
      for (let a = 0; a < TWO_PI; a += 0.05) {
        let x = 16 * pow(sin(a), 3);
        let y = -(13 * cos(a) - 5 * cos(2*a) - 2 * cos(3*a) - cos(4*a));
        heartPoints.push(createVector(x * 8, y * 8));
      }

      // Creamos part칤culas que ir치n a la flor y coraz칩n
      for (let i = 0; i < flowerPoints.length + heartPoints.length; i++) {
        let p = createVector(random(width), random(height));
        if (i < flowerPoints.length) {
          p.target = createVector(width/2 + flowerPoints[i].x, height/2 + flowerPoints[i].y);
          p.color = color(255, 215, 0); // amarillo p칠talos
        } else {
          let h = heartPoints[i - flowerPoints.length];
          p.target = createVector(width/2 + h.x, height/2 + h.y);
          p.color = color(255, 0, 70); // rojo coraz칩n
        }
        particles.push(p);
      }
    }

    function draw() {
      background(0);

      for (let p of particles) {
        let dir = p5.Vector.sub(p.target, p);
        p.add(dir.mult(0.02));
        fill(p.color);
        ellipse(p.x, p.y, 4, 4);
      }

      // Luego de unos segundos lanzamos el texto
      if (frameCount === 100) {
        startTypewriter();
      }
    }

    // M치quina de escribir
    function startTypewriter() {
      currentText = "";
      charIndex = 0;
      let mensajeDiv = document.getElementById("mensaje");
      mensajeDiv.style.opacity = 1;

      let interval = setInterval(() => {
        currentText += typewriterText[textIndex][charIndex];
        mensajeDiv.innerText = currentText;
        charIndex++;

        if (charIndex === typewriterText[textIndex].length) {
          clearInterval(interval);
          // Espera, desvanece y pasa al siguiente
          setTimeout(() => {
            mensajeDiv.style.opacity = 0;
            setTimeout(() => {
              textIndex++;
              if (textIndex < typewriterText.length) {
                currentText = "";
                mensajeDiv.innerText = "";
                startTypewriter();
              }
            }, 1500);
          }, 2000);
        }
      }, 100); // velocidad de escritura
    }
  </script>
</body>
</html>